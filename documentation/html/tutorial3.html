<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>DunGen: Tutorial 3: Custom Materials</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="DunGen-Logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">DunGen
   &#160;<span id="projectnumber">1.2.4</span>
   </div>
   <div id="projectbrief">Dungeongenerator library for Irrlicht</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="tutorial1.html"><span>Tutorial&#160;1</span></a></li>
      <li><a href="tutorial2.html"><span>Tutorial&#160;2</span></a></li>
      <li><a href="tutorial3.html"><span>Tutorial&#160;3</span></a></li>
      <li><a href="tools.html"><span>Tools</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Tutorial 3: Custom Materials </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>You can create your own materials for corridors and the cave. This tutorial shows you, how to use custom materials. At first you need some custom materials. Custom materials have to derive from <a class="el" href="class_dun_gen_1_1_c_material_dun_gen.html">DunGen::CMaterialDunGen</a> . The custom material has to create a material "Material". It also has to implement the virtual function "OnSetConstants", which sets the necessary shader constants. Here is the first material, the material for the cave: </p>
<div class="fragment"><div class="line"><span class="preprocessor">#ifndef MATERIALCAVECUSTOM_H</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define MATERIALCAVECUSTOM_H</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#include &lt;DunGen.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;time.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>CMaterialCaveCustom : <span class="keyword">public</span> <a class="code" href="class_dun_gen_1_1_c_material_dun_gen.html">DunGen::CMaterialDunGen</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    CMaterialCaveCustom(irr::IrrlichtDevice* irrDevice_)</div>
<div class="line">    {</div>
<div class="line">        IrrDevice = irrDevice_;</div>
<div class="line">        Offset[3] = 0.0f;</div>
<div class="line"></div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Creating material cave custom ... &quot;</span>;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// create material</span></div>
<div class="line">        Material = <span class="keyword">static_cast&lt;</span>irr::video::E_MATERIAL_TYPE<span class="keyword">&gt;</span>(</div>
<div class="line">            irrDevice_-&gt;getVideoDriver()-&gt;getGPUProgrammingServices()-&gt;addHighLevelShaderMaterialFromFiles(</div>
<div class="line">            <span class="stringliteral">&quot;data/CaveTut03.shader&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;vertexMain&quot;</span>,</div>
<div class="line">            irr::video::EVST_VS_2_0,</div>
<div class="line">            <span class="stringliteral">&quot;data/CaveTut03.shader&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;pixelMain&quot;</span>,</div>
<div class="line">            irr::video::EPST_PS_2_0,</div>
<div class="line">            <span class="keyword">this</span>,</div>
<div class="line">            irr::video::EMT_SOLID));</div>
<div class="line"></div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;done.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> OnSetConstants(irr::video::IMaterialRendererServices* services_,</div>
<div class="line">        irr::s32 userData_)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// compute color position offsets</span></div>
<div class="line">        Offset[0] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(clock()/7)%1024);</div>
<div class="line">        <span class="keywordflow">if</span> (Offset[0] &gt; 512.0f)</div>
<div class="line">            Offset[0] = 1024.0f - Offset[0];</div>
<div class="line">        Offset[1] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(clock()/11)%1024);</div>
<div class="line">        <span class="keywordflow">if</span> (Offset[1] &gt; 512.0f)</div>
<div class="line">            Offset[1] = 1024.0f - Offset[1];</div>
<div class="line">        Offset[2] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(clock()/13)%1024);</div>
<div class="line">        <span class="keywordflow">if</span> (Offset[2] &gt; 512.0f)</div>
<div class="line">            Offset[2] = 1024.0f - Offset[2];</div>
<div class="line"></div>
<div class="line">        <span class="comment">// camera position = position of the light source</span></div>
<div class="line">        irr::core::vector3df pos = IrrDevice-&gt;getSceneManager()-&gt;getActiveCamera()-&gt;getAbsolutePosition();</div>
<div class="line">        services_-&gt;setVertexShaderConstant(<span class="stringliteral">&quot;mLightPos&quot;</span>, reinterpret_cast&lt;irr::f32*&gt;(&amp;pos), 3);</div>
<div class="line">        services_-&gt;setVertexShaderConstant(<span class="stringliteral">&quot;mOffset&quot;</span>, reinterpret_cast&lt;irr::f32*&gt;(&amp;Offset), 4);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// set world-view-projection matrix</span></div>
<div class="line">        irr::core::matrix4 worldViewProj;</div>
<div class="line">        worldViewProj = IrrDevice-&gt;getVideoDriver()-&gt;getTransform(irr::video::ETS_PROJECTION);</div>
<div class="line">        worldViewProj *= IrrDevice-&gt;getVideoDriver()-&gt;getTransform(irr::video::ETS_VIEW);</div>
<div class="line">        worldViewProj *= IrrDevice-&gt;getVideoDriver()-&gt;getTransform(irr::video::ETS_WORLD);</div>
<div class="line">        services_-&gt;setVertexShaderConstant(<span class="stringliteral">&quot;mWorldViewProj&quot;</span>, worldViewProj.pointer(), 16);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    irr::IrrlichtDevice* IrrDevice;         </div>
<div class="line">    irr::f32 Offset[4];                     </div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#endif</span></div>
</div><!-- fragment --><p>The second material is for the corridors: </p>
<div class="fragment"><div class="line"><span class="preprocessor">#ifndef MATERIALCORRIDORCUSTOM_H</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define MATERIALCORRIDORCUSTOM_H</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#include &lt;DunGen.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>CMaterialCorridorCustom : <span class="keyword">public</span> <a class="code" href="class_dun_gen_1_1_c_material_dun_gen.html">DunGen::CMaterialDunGen</a></div>
<div class="line">{</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    CMaterialCorridorCustom(irr::IrrlichtDevice* irrDevice_)</div>
<div class="line">    {</div>
<div class="line">        IrrDevice = irrDevice_;</div>
<div class="line">        Offset[3] = 0.0f;</div>
<div class="line"></div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Creating material corridor custom ... &quot;</span>;</div>
<div class="line"></div>
<div class="line">        <span class="comment">// create material</span></div>
<div class="line">        Material = <span class="keyword">static_cast&lt;</span>irr::video::E_MATERIAL_TYPE<span class="keyword">&gt;</span>(</div>
<div class="line">            irrDevice_-&gt;getVideoDriver()-&gt;getGPUProgrammingServices()-&gt;addHighLevelShaderMaterialFromFiles(</div>
<div class="line">            <span class="stringliteral">&quot;data/CorridorTut03.shader&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;vertexMain&quot;</span>,</div>
<div class="line">            irr::video::EVST_VS_2_0,</div>
<div class="line">            <span class="stringliteral">&quot;data/CorridorTut03.shader&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;pixelMain&quot;</span>,</div>
<div class="line">            irr::video::EPST_PS_2_0,</div>
<div class="line">            <span class="keyword">this</span>,</div>
<div class="line">            irr::video::EMT_SOLID));</div>
<div class="line"></div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;done.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">virtual</span> <span class="keywordtype">void</span> OnSetConstants(irr::video::IMaterialRendererServices* services_,</div>
<div class="line">        irr::s32 userData_)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// compute color position offsets</span></div>
<div class="line">        Offset[0] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(clock()/7)%1024);</div>
<div class="line">        <span class="keywordflow">if</span> (Offset[0] &gt; 512.0f)</div>
<div class="line">            Offset[0] = 1024.0f - Offset[0];</div>
<div class="line">        Offset[1] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(clock()/11)%1024);</div>
<div class="line">        <span class="keywordflow">if</span> (Offset[1] &gt; 512.0f)</div>
<div class="line">            Offset[1] = 1024.0f - Offset[1];</div>
<div class="line">        Offset[2] = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(clock()/13)%1024);</div>
<div class="line">        <span class="keywordflow">if</span> (Offset[2] &gt; 512.0f)</div>
<div class="line">            Offset[2] = 1024.0f - Offset[2];</div>
<div class="line"></div>
<div class="line">        <span class="comment">// camera position = position of the light source</span></div>
<div class="line">        irr::core::vector3df pos = IrrDevice-&gt;getSceneManager()-&gt;getActiveCamera()-&gt;getAbsolutePosition();</div>
<div class="line">        services_-&gt;setVertexShaderConstant(<span class="stringliteral">&quot;mLightPos&quot;</span>, reinterpret_cast&lt;irr::f32*&gt;(&amp;pos), 3);</div>
<div class="line">        services_-&gt;setVertexShaderConstant(<span class="stringliteral">&quot;mOffset&quot;</span>, reinterpret_cast&lt;irr::f32*&gt;(&amp;Offset), 4);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// set world-view-projection matrix</span></div>
<div class="line">        irr::core::matrix4 worldViewProj;</div>
<div class="line">        worldViewProj = IrrDevice-&gt;getVideoDriver()-&gt;getTransform(irr::video::ETS_PROJECTION);</div>
<div class="line">        worldViewProj *= IrrDevice-&gt;getVideoDriver()-&gt;getTransform(irr::video::ETS_VIEW);</div>
<div class="line">        worldViewProj *= IrrDevice-&gt;getVideoDriver()-&gt;getTransform(irr::video::ETS_WORLD);</div>
<div class="line">        services_-&gt;setVertexShaderConstant(<span class="stringliteral">&quot;mWorldViewProj&quot;</span>, worldViewProj.pointer(), 16);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    irr::IrrlichtDevice* IrrDevice;         </div>
<div class="line">    irr::f32 Offset[4];                     </div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#endif</span></div>
</div><!-- fragment --><p>The code for the main function is the following. It reads a dungeon from XML and shows it, using the custom materials. </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;irrlicht.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;DunGen.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;MaterialCaveCustom.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;MaterialCorridorCustom.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#ifdef _MSC_VER</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#pragma comment(lib, &quot;Irrlicht.lib&quot;)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#pragma comment(lib, &quot;DunGen.lib&quot;)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// check for additional parameters: resolution, anti aliasing</span></div>
<div class="line">    irr::core::dimension2du resolution = irr::core::dimension2du(1200, 900);</div>
<div class="line">    <span class="keywordflow">if</span> (argc&gt;=3)</div>
<div class="line">    {</div>
<div class="line">        resolution.Width = atoi(argv[1]);</div>
<div class="line">        resolution.Height = atoi(argv[2]);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">int</span> antiAlias = 0;</div>
<div class="line">    <span class="keywordflow">if</span> (argc&gt;=4)</div>
<div class="line">        antiAlias = atoi(argv[3]);</div>
<div class="line">    <span class="keywordtype">char</span>* filename = <span class="stringliteral">&quot;dungeon_ascending.xml&quot;</span>;</div>
<div class="line">    <span class="keywordflow">if</span> (argc&gt;=5)</div>
<div class="line">        filename = argv[4];</div>
<div class="line"></div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Dungeongenerator Tutorial 03 is started.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Resolution is: &quot;</span> &lt;&lt; resolution.Width &lt;&lt; <span class="stringliteral">&quot; * &quot;</span> &lt;&lt; resolution.Height &lt;&lt; <span class="stringliteral">&quot; , AntiAliasing: &quot;</span> &lt;&lt;  antiAlias &lt;&lt; <span class="stringliteral">&quot; , Filename: &quot;</span> &lt;&lt;  filename &lt;&lt; std::endl;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// create Irrlicht device</span></div>
<div class="line">    irr::SIrrlichtCreationParameters irrlichtParameter;</div>
<div class="line">    irrlichtParameter.DriverType = irr::video::EDT_DIRECT3D9;</div>
<div class="line">    irrlichtParameter.WindowSize = resolution;</div>
<div class="line">    irrlichtParameter.Bits = 32;</div>
<div class="line">    irrlichtParameter.Fullscreen = <span class="keyword">false</span>;</div>
<div class="line">    irrlichtParameter.Stencilbuffer = <span class="keyword">false</span>;</div>
<div class="line">    irrlichtParameter.Vsync = <span class="keyword">false</span>;</div>
<div class="line">    irrlichtParameter.AntiAlias = antiAlias;</div>
<div class="line">    irrlichtParameter.EventReceiver = 0;</div>
<div class="line"></div>
<div class="line">    irr::IrrlichtDevice* irrDevice = irr::createDeviceEx(irrlichtParameter);</div>
<div class="line">    <span class="keywordflow">if</span>(irrDevice == 0)</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Irrlicht device could not be created, program is terminated.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line">    irr::scene::ISceneManager* sceneManager = irrDevice-&gt;getSceneManager();</div>
<div class="line">    irr::video::IVideoDriver* videoDriver = irrDevice-&gt;getVideoDriver();</div>
<div class="line">    irrDevice-&gt;setWindowCaption(L<span class="stringliteral">&quot;Dungeongenerator Tutorial 03: Custom materials.&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">//************************************************************************</span></div>
<div class="line">    <span class="comment">// Start of dungeon creation</span></div>
<div class="line">    <span class="comment">//************************************************************************</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// create Dungeongenerator instance</span></div>
<div class="line">    <a class="code" href="class_dun_gen_1_1_c_dun_gen.html">DunGen::CDunGen</a> *dunGen = <span class="keyword">new</span> <a class="code" href="class_dun_gen_1_1_c_dun_gen.html">DunGen::CDunGen</a>(irrDevice);</div>
<div class="line">    dunGen-&gt;<a class="code" href="class_dun_gen_1_1_c_dun_gen.html#ae4866af7a398db8850fa186a0fa58b17">StartUp</a>();</div>
<div class="line">    dunGen-&gt;<a class="code" href="class_dun_gen_1_1_c_dun_gen.html#a700c638a254e1c2d87bd8591e6dd8206">SetPrintToConsole</a>(<span class="keyword">true</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// read Dungeon from file</span></div>
<div class="line">    dunGen-&gt;<a class="code" href="class_dun_gen_1_1_c_dun_gen.html#ab32f4c8a4b0d44a09acd983e50e6f67c">ReadDungeonFromFile</a>(filename);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// set custom materials</span></div>
<div class="line">    CMaterialCaveCustom* matCave = <span class="keyword">new</span> CMaterialCaveCustom(irrDevice);</div>
<div class="line">    CMaterialCorridorCustom* matCorridor = <span class="keyword">new</span> CMaterialCorridorCustom(irrDevice);</div>
<div class="line">    dunGen-&gt;<a class="code" href="class_dun_gen_1_1_c_dun_gen.html#a283262ec7f8f78730344c9250e684e75">MaterialSetCustom</a>(<a class="code" href="struct_dun_gen_1_1_s_material_type.html#a9901a0715d4d6f2dd1d55b38bbd0eaf8a874b66c0e0167de979c0c3dbf4a353a7">DunGen::SMaterialType::CAVE_CUSTOM</a>, matCave, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line">    dunGen-&gt;<a class="code" href="class_dun_gen_1_1_c_dun_gen.html#a283262ec7f8f78730344c9250e684e75">MaterialSetCustom</a>(<a class="code" href="struct_dun_gen_1_1_s_material_type.html#a9901a0715d4d6f2dd1d55b38bbd0eaf8a77bf5b6790b2bdd30c308422edf9767b">DunGen::SMaterialType::CORRIDOR_CUSTOM</a>, matCorridor, <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// assemble dungeon</span></div>
<div class="line">    dunGen-&gt;<a class="code" href="class_dun_gen_1_1_c_dun_gen.html#a6113ba3194c7ae1c98b16bdc25dc5f68">AddDungeon</a>(sceneManager-&gt;getRootSceneNode(),sceneManager);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// deletes all not used objects from the Dungeongenerator to save memory</span></div>
<div class="line">    dunGen-&gt;<a class="code" href="class_dun_gen_1_1_c_dun_gen.html#a879d3f484eb565fbcd262e79741015fa">ShutDown</a>();</div>
<div class="line"></div>
<div class="line">    <span class="comment">//************************************************************************</span></div>
<div class="line">    <span class="comment">// Dungeon creation finished</span></div>
<div class="line">    <span class="comment">//************************************************************************</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// create camera</span></div>
<div class="line">    irr::scene::ICameraSceneNode* camera = sceneManager-&gt;addCameraSceneNodeFPS(0,100.0f,0.05f);</div>
<div class="line">    camera-&gt;setFarValue(20000.0f);</div>
<div class="line">    camera-&gt;setPosition(irr::core::vector3df(0,0,0));</div>
<div class="line">    camera-&gt;setTarget(irr::core::vector3df(99999.f, 99999.f, 99999.f));</div>
<div class="line"></div>
<div class="line">    irr::s32 lastFPS(0), actFPS(0);</div>
<div class="line">    irr::core::vector3d&lt;int&gt; lastCamPos(-1,-1,-1);</div>
<div class="line">    irr::core::vector3d&lt;int&gt; actCamPos(0,0,0);</div>
<div class="line">    irr::core::vector3df tmp;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// as long as the engine is active:</span></div>
<div class="line">    <span class="keywordflow">while</span>(irrDevice-&gt;run() &amp;&amp; videoDriver)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (irrDevice-&gt;isWindowActive())</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// draw everything</span></div>
<div class="line">            videoDriver-&gt;beginScene(<span class="keyword">true</span>, <span class="keyword">true</span>, irr::video::SColor(255,100,101,140));</div>
<div class="line">            sceneManager-&gt;drawAll();</div>
<div class="line">            videoDriver-&gt;endScene();</div>
<div class="line"></div>
<div class="line">            actFPS = videoDriver-&gt;getFPS();</div>
<div class="line"></div>
<div class="line">            tmp = camera-&gt;getAbsolutePosition();</div>
<div class="line">            actCamPos.X = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(tmp.X + 0.5f);</div>
<div class="line">            actCamPos.Y = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(tmp.Y + 0.5f);</div>
<div class="line">            actCamPos.Z = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(tmp.Z + 0.5f);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (actFPS != lastFPS || lastCamPos != actCamPos)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// update FPS and camera position</span></div>
<div class="line">                <span class="comment">// and show them as window name</span></div>
<div class="line">                lastFPS = actFPS;</div>
<div class="line">                lastCamPos = actCamPos;</div>
<div class="line"></div>
<div class="line">                irr::core::stringw str = L<span class="stringliteral">&quot;Dungeongenerator Tutorial 03: Custom Materials. - FPS: &quot;</span>;</div>
<div class="line">                str += actFPS;</div>
<div class="line">                str += <span class="stringliteral">&quot; - Position: (&quot;</span>;</div>
<div class="line">                str += actCamPos.X;</div>
<div class="line">                str += <span class="stringliteral">&quot;,&quot;</span>;</div>
<div class="line">                str += actCamPos.Y;</div>
<div class="line">                str += <span class="stringliteral">&quot;,&quot;</span>;</div>
<div class="line">                str += actCamPos.Z;</div>
<div class="line">                str += <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"></div>
<div class="line">                irrDevice-&gt;setWindowCaption(str.c_str());</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            irrDevice-&gt;yield();</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// destroy the engine</span></div>
<div class="line">    irrDevice-&gt;drop();</div>
<div class="line">    <span class="keyword">delete</span> matCave;</div>
<div class="line">    <span class="keyword">delete</span> matCorridor;</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Feb 15 2015 18:23:57 for DunGen by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
